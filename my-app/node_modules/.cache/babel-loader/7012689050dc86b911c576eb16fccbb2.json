{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport Axios from \"axios\";\nexport const getCatalogs = createAsyncThunk(\"catalog/getCatalogs\", async (dispatch, getState) => {\n  alert('Not thunk');\n  const {\n    data\n  } = await Axios.get(\"api/CatalogApi/getcatalogs\");\n  console.log(data['catagories']);\n  return data['Categories'];\n});\nexport const getSubCatalogs = createAsyncThunk(\"catalog/getSubCatalogs\", async (catalogId, thunkAPI) => {\n  alert(\"api/CatalogApi/getsubcatalogs/\" + catalogId);\n\n  try {\n    const {\n      data\n    } = await Axios.get(\"api/CatalogApi/getsubcatalogs/\" + catalogId);\n  } catch (err) {\n    // Use `err.response.data` as `action.payload` for a `rejected` action,\n    // by explicitly returning it using the `rejectWithValue()` utility\n    console.log('da co loi');\n    console.log(err);\n  }\n\n  console.log('Subcatagories thunk');\n  console.log(data);\n  return data['Categories'];\n});\nconst catalogInitialState = {\n  catagories: [],\n  isLoading: false,\n  error: undefined\n};\n\nfunction startLoading(state) {\n  state.isLoading = true;\n}\n\nconst catalogsSlice = createSlice({\n  name: 'catalog',\n  initialState: catalogInitialState,\n  reducers: {// standard reducer logic, with auto-generated action types per reducer\n  },\n  extraReducers: builder => {\n    // Add reducers for additional action types here, and handle loading state as needed\n    builder.addCase(getCatalogs.fulfilled, (state, action) => {\n      // Add user to the state array\n      // state.isLoading = false\n      state.catagories = action.payload;\n      state.isLoading = true; //state.catagories = new string[2]{'dsdsd','sdsdsd'};\n    });\n    builder.addCase(getSubCatalogs.fulfilled, (state, action) => {\n      // Add user to the state array\n      // state.isLoading = false\n      state.catagories = action.payload;\n      state.isLoading = true; //state.catagories = new string[2]{'dsdsd','sdsdsd'};\n    }).addCase(getCatalogs.pending, state => {\n      startLoading(state);\n    }).addCase(getCatalogs.rejected, (state, action) => {\n      state.error = action.error.message; //loadingFailed(state, action)\n    });\n  }\n});\nexport default catalogsSlice.reducer;","map":{"version":3,"sources":["C:/MyProgram/working/ShopCart/Project/my-app/src/slice/catalogSlice.ts"],"names":["createSlice","createAsyncThunk","Axios","getCatalogs","dispatch","getState","alert","data","get","console","log","getSubCatalogs","catalogId","thunkAPI","err","catalogInitialState","catagories","isLoading","error","undefined","startLoading","state","catalogsSlice","name","initialState","reducers","extraReducers","builder","addCase","fulfilled","action","payload","pending","rejected","message","reducer"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,gBAAtB,QAA8C,kBAA9C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAGA,OAAO,MAAMC,WAAW,GAAGF,gBAAgB,CACvC,qBADuC,EAEvC,OAAOG,QAAP,EAAiBC,QAAjB,KAA8B;AAC5BC,EAAAA,KAAK,CAAC,WAAD,CAAL;AACE,QAAM;AAAEC,IAAAA;AAAF,MAAW,MAAML,KAAK,CAACM,GAAN,CAAU,4BAAV,CAAvB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYH,IAAI,CAAC,YAAD,CAAhB;AACF,SAAOA,IAAI,CAAC,YAAD,CAAX;AACD,CAPsC,CAApC;AAUP,OAAO,MAAMI,cAAc,GAAIV,gBAAgB,CAC7C,wBAD6C,EAE7C,OAAOW,SAAP,EAAyBC,QAAzB,KAAsC;AAClCP,EAAAA,KAAK,CAAC,mCAAmCM,SAApC,CAAL;;AACA,MACA;AACE,UAAM;AAAEL,MAAAA;AAAF,QAAW,MAAML,KAAK,CAACM,GAAN,CAAU,mCAAmCI,SAA7C,CAAvB;AACD,GAHD,CAID,OAAOE,GAAP,EAAY;AACX;AACA;AACAL,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ;AACD;;AACCL,EAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AACF,SAAOA,IAAI,CAAC,YAAD,CAAX;AACD,CAjB4C,CAAxC;AA0BP,MAAMQ,mBAAiC,GAAG;AACxCC,EAAAA,UAAU,EAAE,EAD4B;AAExCC,EAAAA,SAAS,EAAE,KAF6B;AAGxCC,EAAAA,KAAK,EAAEC;AAHiC,CAA1C;;AAMA,SAASC,YAAT,CAAsBC,KAAtB,EAA2C;AACzCA,EAAAA,KAAK,CAACJ,SAAN,GAAkB,IAAlB;AACD;;AAID,MAAMK,aAAa,GAAGtB,WAAW,CAAC;AAChCuB,EAAAA,IAAI,EAAE,SAD0B;AAEhCC,EAAAA,YAAY,EAAET,mBAFkB;AAGhCU,EAAAA,QAAQ,EAAE,CACR;AADQ,GAHsB;AAMhCC,EAAAA,aAAa,EAAGC,OAAD,IAAa;AAC1B;AACAA,IAAAA,OAAO,CAACC,OAAR,CAAgBzB,WAAW,CAAC0B,SAA5B,EAAuC,CAACR,KAAD,EAAQS,MAAR,KAAmB;AACxD;AACA;AACAT,MAAAA,KAAK,CAACL,UAAN,GAAmBc,MAAM,CAACC,OAA1B;AACAV,MAAAA,KAAK,CAACJ,SAAN,GAAkB,IAAlB,CAJwD,CAKxD;AACD,KAND;AAQAU,IAAAA,OAAO,CAACC,OAAR,CAAgBjB,cAAc,CAACkB,SAA/B,EAA0C,CAACR,KAAD,EAAQS,MAAR,KAAmB;AAC3D;AACA;AACAT,MAAAA,KAAK,CAACL,UAAN,GAAmBc,MAAM,CAACC,OAA1B;AACAV,MAAAA,KAAK,CAACJ,SAAN,GAAkB,IAAlB,CAJ2D,CAK3D;AACD,KAND,EAQCW,OARD,CAQSzB,WAAW,CAAC6B,OARrB,EAQ+BX,KAAD,IAAW;AACvCD,MAAAA,YAAY,CAACC,KAAD,CAAZ;AAGD,KAZD,EAaCO,OAbD,CAaSzB,WAAW,CAAC8B,QAbrB,EAa+B,CAACZ,KAAD,EAAQS,MAAR,KAAmB;AAChDT,MAAAA,KAAK,CAACH,KAAN,GAAcY,MAAM,CAACZ,KAAP,CAAagB,OAA3B,CADgD,CAEhD;AACD,KAhBD;AAiBD;AAjC+B,CAAD,CAAjC;AAwCE,eAAeZ,aAAa,CAACa,OAA7B","sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport Axios from \"axios\";\r\nimport { ICatagory } from \"../api/interface/iCatalog\";\r\n\r\nexport const getCatalogs = createAsyncThunk(\r\n    \"catalog/getCatalogs\",\r\n    async (dispatch, getState) => {\r\n      alert('Not thunk')\r\n        const { data } = await Axios.get(\"api/CatalogApi/getcatalogs\");\r\n        console.log(data['catagories'])\r\n      return data['Categories']\r\n    }\r\n);\r\n\r\nexport const getSubCatalogs =  createAsyncThunk(\r\n  \"catalog/getSubCatalogs\",\r\n  async (catalogId:number, thunkAPI) => {\r\n      alert(\"api/CatalogApi/getsubcatalogs/\" + catalogId)\r\n      try\r\n      {\r\n        const { data } = await Axios.get(\"api/CatalogApi/getsubcatalogs/\" + catalogId);\r\n      }\r\n     catch (err) {\r\n      // Use `err.response.data` as `action.payload` for a `rejected` action,\r\n      // by explicitly returning it using the `rejectWithValue()` utility\r\n      console.log('da co loi')\r\n      console.log(err)\r\n    }\r\n      console.log('Subcatagories thunk')\r\n      console.log(data)\r\n    return data['Categories']\r\n  }\r\n);\r\n\r\ninterface CatalogState {    \r\n  catagories: ICatagory[]   \r\n  isLoading: boolean\r\n  error:  string|undefined\r\n}\r\n\r\nconst catalogInitialState: CatalogState = {    \r\n  catagories: [],    \r\n  isLoading: false,\r\n  error: undefined\r\n}\r\n\r\nfunction startLoading(state: CatalogState) {\r\n  state.isLoading = true\r\n}\r\n\r\n\r\n\r\nconst catalogsSlice = createSlice({\r\n  name: 'catalog',\r\n  initialState: catalogInitialState,\r\n  reducers: {\r\n    // standard reducer logic, with auto-generated action types per reducer\r\n  },\r\n  extraReducers: (builder) => {\r\n    // Add reducers for additional action types here, and handle loading state as needed\r\n    builder.addCase(getCatalogs.fulfilled, (state, action) => {\r\n      // Add user to the state array\r\n      // state.isLoading = false\r\n      state.catagories = action.payload\r\n      state.isLoading = true\r\n      //state.catagories = new string[2]{'dsdsd','sdsdsd'};\r\n    })\r\n\r\n    builder.addCase(getSubCatalogs.fulfilled, (state, action) => {\r\n      // Add user to the state array\r\n      // state.isLoading = false\r\n      state.catagories = action.payload\r\n      state.isLoading = true\r\n      //state.catagories = new string[2]{'dsdsd','sdsdsd'};\r\n    })\r\n    \r\n    .addCase(getCatalogs.pending, (state) => {\r\n      startLoading(state)\r\n      \r\n    \r\n    })\r\n    .addCase(getCatalogs.rejected, (state, action) => {\r\n      state.error = action.error.message\r\n      //loadingFailed(state, action)\r\n    })\r\n  },\r\n})\r\n  \r\n \r\n  \r\n \r\n  \r\n  export default catalogsSlice.reducer;"]},"metadata":{},"sourceType":"module"}